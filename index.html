<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Project documentation for CWatM implementation in SpineToolbox"><meta name=author content="VTT DOES Team"><link href=https://jeanlouisnico.github.io/CWatM-spinetoolbox/ rel=canonical><link href=introduction/ rel=next><link rel=icon href=images/flex_cwatm_logo.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.21"><title>FlexTool - CWatM</title><link rel=stylesheet href=assets/stylesheets/main.2a3383ac.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#welcome-to-flextoolcwatm-user-guide class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=https://jeanlouisnico.github.io/CWatM-spinetoolbox/ title="FlexTool - CWatM" class="md-header__button md-logo" aria-label="FlexTool - CWatM" data-md-component=logo> <img src=images/flex_cwatm_logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> FlexTool - CWatM </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> About us </span> </div> </div> </div> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jeanlouisnico/CWatM-spinetoolbox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> jeanlouisnico/CWatM-spinetoolbox </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://jeanlouisnico.github.io/CWatM-spinetoolbox/ title="FlexTool - CWatM" class="md-nav__button md-logo" aria-label="FlexTool - CWatM" data-md-component=logo> <img src=images/flex_cwatm_logo.png alt=logo> </a> FlexTool - CWatM </label> <div class=md-nav__source> <a href=https://github.com/jeanlouisnico/CWatM-spinetoolbox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> jeanlouisnico/CWatM-spinetoolbox </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> About us </span> <span class="md-nav__icon md-icon"></span> </label> <a href=. class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> About us </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#the-genesis class=md-nav__link> <span class=md-ellipsis> The genesis </span> </a> </li> <li class=md-nav__item> <a href=#support class=md-nav__link> <span class=md-ellipsis> Support </span> </a> </li> <li class=md-nav__item> <a href=#how-to-cite class=md-nav__link> <span class=md-ellipsis> How to cite </span> </a> </li> <li class=md-nav__item> <a href=#go-further class=md-nav__link> <span class=md-ellipsis> Go further </span> </a> </li> <li class=md-nav__item> <a href=#the-team class=md-nav__link> <span class=md-ellipsis> The team </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=introduction/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Getting started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=getting_started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=navigating/ class=md-nav__link> <span class=md-ellipsis> Navigating the workflow </span> </a> </li> <li class=md-nav__item> <a href=Tutorial/ class=md-nav__link> <span class=md-ellipsis> Running standalone version </span> </a> </li> <li class=md-nav__item> <a href=setting_calibration/ class=md-nav__link> <span class=md-ellipsis> Setup for calibration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=example_models/ class=md-nav__link> <span class=md-ellipsis> Coupling </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#the-genesis class=md-nav__link> <span class=md-ellipsis> The genesis </span> </a> </li> <li class=md-nav__item> <a href=#support class=md-nav__link> <span class=md-ellipsis> Support </span> </a> </li> <li class=md-nav__item> <a href=#how-to-cite class=md-nav__link> <span class=md-ellipsis> How to cite </span> </a> </li> <li class=md-nav__item> <a href=#go-further class=md-nav__link> <span class=md-ellipsis> Go further </span> </a> </li> <li class=md-nav__item> <a href=#the-team class=md-nav__link> <span class=md-ellipsis> The team </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <div><h1 id=welcome-to-flextoolcwatm-user-guide>Welcome to FlexTool/CWatM User Guide!<a class=headerlink href=#welcome-to-flextoolcwatm-user-guide title="Permanent link">¶</a></h1> <div style=text-align:center><img src=./images/flex_cwatm_logo.png></div> <h2 id=the-genesis>The genesis<a class=headerlink href=#the-genesis title="Permanent link">¶</a></h2> <p>In an effort to support the energy transition and consider the impact of climate change, needs to understand better the interaction between water cycles and its impact on water availability for hydropower stations is becoming of utmost important. This is in particular importance in regions where hydropower is the main source of power and where water has conflicting usage between sectors e.g. energy, agriculture. As a technical research institute, VTT has been committed to develop state-of-the-art energy system models, such as IRENA FlexTool, but also many others. </p> <p>On the other hand, hydrology modelling has seen a leap in taking at hand the development of models that consider the nexus dilemma in their modelling approach. One of these models is CWatM, an open source hydrology model developed by IIASA. CWatM covers multiple water-dependent sectors such as the agriculture and energy. It includes the water demand both from domestic and industrial usage. It can evaluate the water demand from crops depending on the type of crops that is being grown in the water basin. Recently, CWatM has integrated the groundwater model Modflow6 in its heart, offering more possibility to track down where the water goes. The time resolution goes down to daily simulation of the water flow, and the geographical resolution starts from 30 arc min down to a 1 km resolution. It grids the area where the water is extracted and has a module for integrating water reservoirs and its discharge over time. However, the hydropower representation in CWatM is very simple, and does not consider its integration into an energy system. This is where our motivation to create a bridge between these two established and open source models is born. </p> <p>Unlike CWatM, IRENA FlexTool is an optimisation energy system model that aims at minimising the system costs in its operations at an hourly resolution. It is highly flexible and technologies can be specific to a single power plant or aggregated by energy sources. It offers investments decision on power production technology development and infrastructure reinforcements or capacity expansion. Simple to use, the third version of FlexTool now runs through an open-source user interface, also co-developed by VTT, SpineToolbox. SpineToolbox is a data flow, scenario, and alternative management interface. SpineToolbox is model agnostic and can run natively any models developed in Python, Julia, and GAMS. Moreover, SpineToolbox can run any *.exe software, or run batch files within its terminal. It is a cross platform tool that can be used on Windows, Linux, and MacOS. Since CWatM does not have any user interface, the first step towards model integration was to give CWatM an interface where all its scenario can be handled in a single database (instead of being scattered through multiple, self-managed *.ini files). SpineToolbox can further handle the parallelisation of the runs by isolating each instance of every models.</p> <h2 id=support>Support<a class=headerlink href=#support title="Permanent link">¶</a></h2> <p>Currently, the model coupling is supported by the Finnish Ministry of Foreign Affairs and the Research Council of Finland via the TU-Nexus project. The University of Oulu brings their expertise in hydrology while VTT provides the energy system modelling expertise as well as the model coupling competences.</p> <h2 id=how-to-cite>How to cite<a class=headerlink href=#how-to-cite title="Permanent link">¶</a></h2> <p>At the moment, we are still in the early phase of the model integration, therefore no scientific publication is yet available. However, in an effort of transparency, we are making the development available for anyone interested in this integration, and invite any experts in the field to test it out and provide us feedback on its usability. We are trying to keep the research community up-to-date via this documentation page.</p> <h2 id=go-further>Go further<a class=headerlink href=#go-further title="Permanent link">¶</a></h2> <p>Learn more about CWatM here → </p> <p>Learn more about IRENA FlexTool here →</p> <p>Learn more about SpineToolbox here and the Spine Family suite.</p> <h2 id=the-team>The team<a class=headerlink href=#the-team title="Permanent link">¶</a></h2> <p>Contact us: <a href=mailto:does-info@vtt.fi>does-info@vtt.fi</a></p> <p>VTT is the Technical Research of Finland in which the Design and Operation of Energy System team is leading the development of energy system modelling tools. </p> <table style="border-collapse: collapse; border: none; border-spacing: 0px;"> <tr> <td style="border-top: 1px solid rgb(0, 0, 0); text-align: center; padding-right: 3pt; padding-left: 3pt;"> <img alt=JK src=images\people\JNL.png style=zoom:100%;> <br> Jean-Nicolas Louis <br> <br> Research Team Leader <br> Model coupling and CWatM <br> integration in SpineToolbox <br> </td> <td style="border-top: 1px solid rgb(0, 0, 0); text-align: center; padding-right: 3pt; padding-left: 3pt;"> <img alt=JNL src=images\people\JK.png style=zoom:100%;> <br> Juha Kiviluoma <br> <br> Principal Scientist <br> Model coupling <br> </td> <td style="border-top: 1px solid rgb(0, 0, 0); text-align: center; padding-right: 3pt; padding-left: 3pt;"> <img alt=NP src=images\people\NP.png style=zoom:100%;> <br> Nelli Putkonen <br> <br> Research Scientist <br> FlexTool model <br> Model coupling <br> </td> <td style="border-top: 1px solid rgb(0, 0, 0); text-align: center; padding-right: 3pt; padding-left: 3pt;"> <img alt=RA src=images\people\RA.png style=zoom:100%;> <br> Rinat Abdurafikov <br> <br> Research Scientist <br> FlexTool model <br> </td> </tr> <tr> <td style="border-top: 1px solid rgb(0, 0, 0); text-align: center; padding-right: 3pt; padding-left: 3pt;"> <br> <br> </td> <td style="border-top: 1px solid rgb(0, 0, 0); text-align: center; padding-right: 3pt; padding-left: 3pt;"> <img alt="Doniyor Urishov" src=images\people\DU.png style=zoom:70%;> <br> Doniyor Urishov <br> <br> Research Scientist <br> Local interaction <br> </td> <td style="border-top: 1px solid rgb(0, 0, 0); text-align: center; padding-right: 3pt; padding-left: 3pt;"> <img alt="Arttu Tupala" src=images\people\AT.png style=zoom:70%;> <br> Arttu Tupala <br> <br> Research Trainee <br> FlexTool model <br> </td> <td style="border-top: 1px solid rgb(0, 0, 0); text-align: center; padding-right: 3pt; padding-left: 3pt;"> <br> <br> </td> </tr> </table> <p>The University of Oulu is located in the north of Finland and has a strong water research team developed in the water, energy, and environmental engineering research unit.</p></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 - 2024 VTT - Design and Operation of Energy Systems </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": ".", "features": [], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=assets/javascripts/bundle.f55a23d4.min.js></script> </body> </html>